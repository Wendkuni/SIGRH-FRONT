<div class="grid">
  <div class="col-12">
    <h5>Besoin en personnel</h5>
    <p-toolbar>
      <div class="p-toolbar-group-left flex flex-wrap">
        <button pButton type="button" label="Ajouter" icon="pi pi-plus" class="mr-2"
          (click)="showBesoinPersonnelDialog()"></button>
      </div>
    </p-toolbar>
  </div>

  <div class="col-12">
    <!-- Page table -->
    <p-table
      #tableDrenBesoinPersonnel
      [columns]="colsDrenBesoinPersonnel"
      responsiveLayout="scroll"
      [globalFilterFields]="['departement', 'fonction', 'nombre', 'annee']"
      [rows]="10"
      [paginator]="true"
      [rowsPerPageOptions]="[10, 20, 30]"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [rowHover]="true"
      dataKey="n"
    >
      <!--      Global filter -->
      <ng-template pTemplate="caption">
        <div
          class="flex flex-column md:flex-row md:justify-content-between md:align-items-center"
        >
      <span class="block mt-2 md:mt-0 p-input-icon-left">
            <i class="pi pi-search"></i>
            <input
              pInputText
              type="text"
              (input)="onGlobalFilter(tableDrenBesoinPersonnel, $event)"
              placeholder="Search..."
              class="w-full sm:w-auto"
            />
          </span>
        </div>
      </ng-template>

      <!--      Table header part-->
      <ng-template let-columns pTemplate="header">
        <tr>
          @for (col of columns; track col.field) {
            <th
              style="min-width: 10rem"
              [pSortableColumn]="col.field"
              class="font-weight-bold"
            >
              {{ col.header }}
              <p-sortIcon [field]="col.field"></p-sortIcon>
            </th>
          }
        </tr>
      </ng-template>

    </p-table>
  </div>
</div>


<p-dialog [(visible)]="besoinPersonnelDialog" [style]="{width: '450px'}" header="Formulaire besoin en personnel"
  [modal]="true" class="p-fluid">
  <ng-template pTemplate="content">
    <div class="grid ">
      <div class="field col-12">
        <label for="departement">Département</label> <input type="text" pInputText id="departement"
        [(ngModel)]="besoinPersonnel.departement" class="w-full"/>
      </div>
      <div class="field col-12">
        <label for="fonction">Fonction</label> <input type="text" pInputText id="fonction"
        [(ngModel)]="besoinPersonnel.fonction" class="w-full"/>
      </div>
      <div class="field col-12">
        <label for="nombre">Nombre</label> <input type="number" pInputText id="nombre"
        [(ngModel)]="besoinPersonnel.nombre" class="w-full"/>
      </div>
      <div class="field col-12">
        <label for="annee">Année</label>
        <p-calendar
          id="annee"
          appendTo="body"
          [(ngModel)]="besoinPersonnel.annee"
          [iconDisplay]="'input'"
          [showIcon]="true"
          view="year"
          dateFormat="yy"
          inputId="icondisplay"/>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <div class="flex justify-content-end">
      <button pButton type="button" label="Enregistrer" class="p-button-success"></button>
      <button pButton type="button" label="Annuler" class="p-button-outlined p-button-danger mr-2"></button>
    </div>
  </ng-template>
</p-dialog>
